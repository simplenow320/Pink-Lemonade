{% extends "base.html" %}

{% block title %}Dashboard - Pink Lemonade{% endblock %}

{% block content %}

<div style="min-height: 100vh; background: #F8F9FA;">
  
  <!-- Header -->
  <div style="background: white; padding: 48px 20px; border-bottom: 1px solid #E8E8E8;">
    <div style="max-width: 1200px; margin: 0 auto; text-align: center;">
      <h1 style="font-size: 2.5rem; font-weight: 400; color: #2A2A2A; margin: 0 0 16px 0; letter-spacing: -0.01em;">
        Dashboard
      </h1>
      <p style="font-size: 1.1rem; color: #6B6B6B; margin: 0;">
        Your grant opportunities at a glance
      </p>
    </div>
  </div>

  <!-- Content -->
  <div style="max-width: 1200px; margin: 0 auto; padding: 48px 20px;">

    <!-- Quick Stats -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 24px; margin-bottom: 48px;">
      
      <div style="background: white; border-radius: 16px; border: 1px solid #E8E8E8; padding: 32px; text-align: center;">
        <div style="font-size: 2.5rem; font-weight: 600; color: #B8899A; margin-bottom: 8px;">
          {{ stats.total }}
        </div>
        <div style="color: #6B6B6B; font-size: 0.95rem; font-weight: 500;">
          Total Opportunities
        </div>
      </div>
      
      <div style="background: white; border-radius: 16px; border: 1px solid #E8E8E8; padding: 32px; text-align: center;">
        <div style="font-size: 2.5rem; font-weight: 600; color: #B8899A; margin-bottom: 8px;">
          {{ stats.due_this_month }}
        </div>
        <div style="color: #6B6B6B; font-size: 0.95rem; font-weight: 500;">
          Due This Month
        </div>
      </div>
      
      <div style="background: white; border-radius: 16px; border: 1px solid #E8E8E8; padding: 32px; text-align: center;">
        <div style="font-size: 2.5rem; font-weight: 600; color: #B8899A; margin-bottom: 8px;">
          {{ stats.avg_fit or 'N/A' }}
        </div>
        <div style="color: #6B6B6B; font-size: 0.95rem; font-weight: 500;">
          Average Fit Score
        </div>
      </div>
      
      <div style="background: white; border-radius: 16px; border: 1px solid #E8E8E8; padding: 32px; text-align: center;">
        <div style="font-size: 2.5rem; font-weight: 600; color: #B8899A; margin-bottom: 8px;">
          {{ stats.submitted }}
        </div>
        <div style="color: #6B6B6B; font-size: 0.95rem; font-weight: 500;">
          Applications Submitted
        </div>
      </div>
    </div>

    <!-- Top Matches Section -->
    <div style="background: white; border-radius: 16px; border: 1px solid #E8E8E8; padding: 48px;">
      
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
        <h2 style="font-size: 1.5rem; font-weight: 600; color: #2A2A2A; margin: 0;">
          Top Matches
        </h2>
        <a href="/opportunities" style="display: inline-block; padding: 12px 24px; background: linear-gradient(135deg, #B8899A, #D4BAC7); color: white; text-decoration: none; border-radius: 8px; font-weight: 500; font-size: 0.95rem;">
          View All
        </a>
      </div>
      
      {% if top_matches %}
      <div style="display: flex; flex-direction: column; gap: 20px;">
        {% for match in top_matches %}
        <div style="background: #FAFAFA; border-radius: 12px; padding: 24px; border: 1px solid #F0F0F0; cursor: pointer; transition: all 0.2s ease;" onclick="window.location.href='/grant/{{ loop.index }}'" onmouseover="this.style.backgroundColor='#F5F5F5'" onmouseout="this.style.backgroundColor='#FAFAFA'">
          <div style="display: flex; justify-content: space-between; align-items: flex-start;">
            <div style="flex: 1;">
              <h3 style="font-size: 1.25rem; font-weight: 600; color: #2A2A2A; margin: 0 0 8px 0;">
                {{ match.title }}
              </h3>
              <p style="color: #6B6B6B; font-size: 0.95rem; margin: 0 0 16px 0;">
                {{ match.funder }}
              </p>
              <div style="display: flex; align-items: center; gap: 12px;">
                <div style="background: linear-gradient(135deg, #B8899A, #D4BAC7); color: white; padding: 4px 12px; border-radius: 12px; font-size: 0.85rem; font-weight: 500;">
                  {{ match.fit }}/5 â˜…
                </div>
                <div style="background: #FFF3E0; color: #E65100; padding: 4px 12px; border-radius: 12px; font-size: 0.85rem; font-weight: 500;">
                  Due {{ match.deadline }}
                </div>
              </div>
            </div>
            <div style="color: #B8899A; font-size: 1.5rem; margin-left: 16px;">
              â†’
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <div style="text-align: center; padding: 48px; background: #FAFAFA; border-radius: 12px;">
        <div style="font-size: 3rem; margin-bottom: 16px; opacity: 0.4;">ðŸŽ¯</div>
        <div style="font-size: 1.25rem; font-weight: 600; color: #2A2A2A; margin-bottom: 8px;">
          No Grant Matches Yet
        </div>
        <div style="color: #6B6B6B; margin-bottom: 24px; font-size: 0.95rem; line-height: 1.5;">
          Discover opportunities to see your personalized matches<br>based on your organization's profile
        </div>
        <a href="/opportunities" style="display: inline-block; padding: 12px 24px; background: linear-gradient(135deg, #B8899A, #D4BAC7); color: white; text-decoration: none; border-radius: 8px; font-weight: 500; font-size: 0.95rem;">
          Start Discovering
        </a>
      </div>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}