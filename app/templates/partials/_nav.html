<!-- Navigation for Landing Page (Logo Only) -->
{% if request.endpoint == 'index' %}
<nav class="nav-centered" role="navigation" aria-label="Primary">
  <img src="{{ url_for('static', filename='logo.png') }}" alt="Pink Lemonade" class="logo-5x" />
</nav>
{% else %}
<!-- Navigation for All Other Pages (Logo + Hamburger Menu) -->
<nav class="nav-with-menu" role="navigation" aria-label="Primary">
  <div class="nav-container">
    <!-- Logo -->
    <a href="/" class="nav-logo">
      <img src="{{ url_for('static', filename='logo.png') }}" alt="Pink Lemonade" class="logo-4x" />
    </a>
    
    <!-- Hamburger Button -->
    <button class="hamburger-btn" id="hamburgerBtn" aria-label="Open navigation menu" aria-expanded="false">
      <div class="hamburger-line"></div>
      <div class="hamburger-line"></div>
      <div class="hamburger-line"></div>
    </button>
  </div>
  
  <!-- Mobile Menu Overlay -->
  <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
  
  <!-- Navigation Menu -->
  <div class="nav-menu" id="navMenu">
    <div class="nav-menu-header">
      <img src="{{ url_for('static', filename='logo.png') }}" alt="Pink Lemonade" class="logo-3x" />
      <button class="close-btn" id="closeBtn" aria-label="Close navigation menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    
    <ul class="nav-menu-list">
      <li><a href="/opportunities" class="nav-link {% if active == 'opportunities' %}active{% endif %}">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="M21 21l-4.35-4.35"></path>
        </svg>
        Discover Opportunities
      </a></li>
      
      <li><a href="/profile" class="nav-link {% if active == 'profile' %}active{% endif %}">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        Organization Profile
      </a></li>
      
      <li><a href="/dashboard" class="nav-link {% if active == 'dashboard' %}active{% endif %}">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        Dashboard
      </a></li>
      
      <li><a href="/saved" class="nav-link {% if active == 'saved' %}active{% endif %}">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"></path>
        </svg>
        Saved Grants
      </a></li>
      
      <li><a href="/applications" class="nav-link {% if active == 'applications' %}active{% endif %}">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14,2 14,8 20,8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10,9 9,9 8,9"></polyline>
        </svg>
        Applications
      </a></li>
      

      
      <li class="nav-divider"></li>
      
      <li><a href="/settings" class="nav-link {% if active == 'settings' %}active{% endif %}">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1m17-4a3 3 0 11-6 0 3 3 0 016 0zM7 17a3 3 0 11-6 0 3 3 0 016 0z"></path>
        </svg>
        Settings
      </a></li>
    </ul>
  </div>
</nav>

<style>
/* Navigation Styles */
.nav-with-menu {
  position: relative;
  z-index: 1000;
}

.nav-container {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  background: white;
  border-bottom: 1px solid #E8E8E8;
}

.nav-logo img {
  height: 40px; /* 32px * 1.25 = 40px */
  transition: all 0.2s ease;
}

.nav-logo:hover img {
  opacity: 0.8;
}

/* Hamburger Button */
.hamburger-btn {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  width: 28px;
  height: 20px;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
  transition: all 0.3s ease;
}

.hamburger-line {
  width: 100%;
  height: 2px;
  background: #B7899A;
  transition: all 0.3s ease;
  transform-origin: center;
}

.hamburger-btn:hover .hamburger-line {
  background: #A67A8A;
}

.hamburger-btn.active .hamburger-line:nth-child(1) {
  transform: rotate(45deg) translate(6px, 6px);
}

.hamburger-btn.active .hamburger-line:nth-child(2) {
  opacity: 0;
}

.hamburger-btn.active .hamburger-line:nth-child(3) {
  transform: rotate(-45deg) translate(6px, -6px);
}

/* Mobile Menu Overlay */
.mobile-menu-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.5);
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
  z-index: 1001;
}

.mobile-menu-overlay.active {
  opacity: 1;
  visibility: visible;
}

/* Navigation Menu */
.nav-menu {
  position: fixed;
  top: 0;
  right: -320px;
  width: 320px;
  height: 100vh;
  background: white;
  border-left: 1px solid #E8E8E8;
  transition: all 0.3s ease;
  z-index: 1002;
  box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
}

.nav-menu.active {
  right: 0;
}

.nav-menu-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  border-bottom: 1px solid #F0F0F0;
  background: #FAFAFA;
}

.nav-menu-header img {
  height: 30px; /* 24px * 1.25 = 30px */
}

.close-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  color: #6B6B6B;
  transition: all 0.2s ease;
}

.close-btn:hover {
  background: #F0F0F0;
  color: #B7899A;
}

/* Navigation Links */
.nav-menu-list {
  list-style: none;
  margin: 0;
  padding: 20px 0;
}

.nav-menu-list li {
  margin: 0;
}

.nav-link {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 24px;
  color: #2A2A2A;
  text-decoration: none;
  font-size: 0.95rem;
  font-weight: 500;
  transition: all 0.2s ease;
  border-left: 3px solid transparent;
}

.nav-link:hover {
  background: #F8F8F8;
  color: #B7899A;
  border-left-color: #B7899A;
}

.nav-link.active {
  background: #F5F0F1;
  color: #B7899A;
  border-left-color: #B7899A;
}

.nav-link svg {
  flex-shrink: 0;
  opacity: 0.7;
}

.nav-link:hover svg,
.nav-link.active svg {
  opacity: 1;
}

.nav-divider {
  height: 1px;
  background: #E8E8E8;
  margin: 16px 24px;
}

/* Responsive Design */
@media (max-width: 768px) {
  .nav-menu {
    width: 100%;
    right: -100%;
  }
}

/* Hide hamburger on landing page */
.nav-centered .hamburger-btn {
  display: none;
}
</style>

<script>
// Navigation functionality
document.addEventListener('DOMContentLoaded', function() {
  const hamburgerBtn = document.getElementById('hamburgerBtn');
  const closeBtn = document.getElementById('closeBtn');
  const navMenu = document.getElementById('navMenu');
  const overlay = document.getElementById('mobileMenuOverlay');
  
  if (!hamburgerBtn || !navMenu) return;
  
  function openMenu() {
    navMenu.classList.add('active');
    overlay.classList.add('active');
    hamburgerBtn.classList.add('active');
    hamburgerBtn.setAttribute('aria-expanded', 'true');
    document.body.style.overflow = 'hidden';
  }
  
  function closeMenu() {
    navMenu.classList.remove('active');
    overlay.classList.remove('active');
    hamburgerBtn.classList.remove('active');
    hamburgerBtn.setAttribute('aria-expanded', 'false');
    document.body.style.overflow = '';
  }
  
  // Toggle menu
  hamburgerBtn.addEventListener('click', function() {
    if (navMenu.classList.contains('active')) {
      closeMenu();
    } else {
      openMenu();
    }
  });
  
  // Close menu
  if (closeBtn) {
    closeBtn.addEventListener('click', closeMenu);
  }
  
  // Close on overlay click
  if (overlay) {
    overlay.addEventListener('click', closeMenu);
  }
  
  // Close on escape key
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && navMenu.classList.contains('active')) {
      closeMenu();
    }
  });
  
  // Close menu when clicking nav links
  const navLinks = document.querySelectorAll('.nav-link');
  navLinks.forEach(link => {
    link.addEventListener('click', function() {
      // Small delay to allow navigation to start
      setTimeout(closeMenu, 100);
    });
  });
});
</script>
{% endif %}