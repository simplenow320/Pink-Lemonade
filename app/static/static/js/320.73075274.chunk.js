"use strict";(self.webpackChunkgrantflow_client=self.webpackChunkgrantflow_client||[]).push([[320],{320:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var r=s(5563),a=s(9033),n=s(6779);const i=e=>{let{message:t,type:s="success",onClose:a,duration:i=5e3}=e;(0,r.useEffect)(()=>{const e=setTimeout(()=>{a()},i);return()=>clearTimeout(e)},[i,a]);return(0,n.jsx)("div",{className:"fixed top-4 right-4 p-4 rounded-lg border shadow-lg z-50 max-w-md ".concat((()=>{switch(s){case"success":return"bg-green-50 text-green-800 border-green-200";case"error":return"bg-red-50 text-red-800 border-red-200";case"info":return"bg-blue-50 text-blue-800 border-blue-200";default:return"bg-gray-50 text-gray-800 border-gray-200"}})()),children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("p",{className:"font-medium",children:t}),(0,n.jsx)("button",{onClick:a,className:"ml-4 text-sm font-medium hover:opacity-75",children:"\xd7"})]})})};var o=s(6430);const l=()=>{const e=(0,a.Zp)(),[t,s]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),[d,m]=(0,r.useState)(""),[x,g]=(0,r.useState)(null),[h,u]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),y=async()=>{c(!0);try{const e=await o.Ay.get("/opportunities?orgId=".concat(1));s(e.data.opportunities||[])}catch(e){console.error("Error fetching opportunities:",e),g({message:"Failed to load opportunities",type:"error"})}finally{c(!1)}},j=async()=>{u(!0);try{const e={orgId:1};d&&(e.query=d);const t=await o.Ay.post("/scrape/run-now",e),{upserted:s,mode:r}=t.data;g({message:"Upserted ".concat(s," opportunities in ").concat(r," mode"),type:"success"}),await y()}catch(e){console.error("Error running scraper:",e),g({message:"Failed to run scraper. Please try again.",type:"error"})}finally{u(!1)}};return(0,r.useEffect)(()=>{y()},[]),(0,r.useEffect)(()=>{t.length>0&&(async()=>{try{const s=await fetch("/api/organization/get",{credentials:"include"});if(s.ok){var e;const r=(await s.json()).organization,a=!(null!==r&&void 0!==r&&r.mission)||!(null!==r&&void 0!==r&&r.primary_focus_areas)||0===(null===r||void 0===r||null===(e=r.primary_focus_areas)||void 0===e?void 0:e.length);f(a&&t.length>0)}}catch(s){console.error("Error checking profile:",s)}})()},[t]),l||0!==t.length||h?(0,n.jsxs)("div",{className:"p-6",children:[p&&(0,n.jsx)("div",{className:"mb-6 bg-gradient-to-r from-pink-50 to-purple-50 border border-pink-200 rounded-lg p-6",children:(0,n.jsxs)("div",{className:"flex items-start",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-6 h-6 text-pink-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,n.jsxs)("div",{className:"ml-4 flex-1",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Improve Your Grant Matches!"}),(0,n.jsx)("p",{className:"mt-1 text-gray-600",children:"Complete your organization profile to get better grant recommendations tailored to your mission and focus areas."}),(0,n.jsxs)("div",{className:"mt-4 flex items-center space-x-3",children:[(0,n.jsx)("button",{onClick:()=>e("/organization"),className:"px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors font-medium",children:"Complete Profile"}),(0,n.jsx)("button",{onClick:()=>f(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Later"})]})]})]})}),(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Grant Opportunities"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Discover and manage funding opportunities"})]}),(0,n.jsx)("button",{onClick:j,disabled:h,className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat(h?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-pink-500 text-white hover:bg-pink-600"),children:h?"Discovering...":"Refresh Grants"})]}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)("input",{type:"text",placeholder:"Search for specific grants (optional)",value:d,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500"})}),(l||h)&&(0,n.jsx)("div",{className:"bg-white shadow rounded-lg p-12",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600 text-lg font-medium",children:h?"Discovering new grant opportunities...":"Loading opportunities..."}),(0,n.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"This may take a few moments"})]})}),!l&&!h&&(0,n.jsx)("div",{className:"bg-white shadow rounded-lg",children:t.length>0?(0,n.jsx)("div",{className:"divide-y divide-gray-200",children:t.map(e=>(0,n.jsxs)("div",{className:"p-4 hover:bg-gray-50",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.funder}),e.deadline&&(0,n.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Deadline: ",new Date(e.deadline).toLocaleDateString()]}),e.amount_min&&(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:["Amount: $",e.amount_min.toLocaleString(),e.amount_max&&" - $".concat(e.amount_max.toLocaleString())]})]}),e.match_score&&(0,n.jsx)("div",{className:"ml-4",children:(0,n.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.match_score>=4?"bg-green-100 text-green-800":e.match_score>=3?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:["Score: ",e.match_score,"/5"]})})]}),(0,n.jsxs)("div",{className:"flex gap-3 mt-2",children:[(0,n.jsx)(a.N_,{to:"/grant/".concat(e.id),className:"text-sm text-pink-600 hover:text-pink-700",children:"Analyze Grant \u2192"}),e.link&&(0,n.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-600 hover:text-gray-700",children:"Official Page \u2197"})]})]},e.id))}):(0,n.jsxs)("div",{className:"p-8 text-center",children:[(0,n.jsx)("p",{className:"text-gray-500 mb-4",children:"No opportunities found"}),(0,n.jsx)("p",{className:"text-sm text-gray-400",children:'Try adjusting your search or click "Refresh Grants" to discover new opportunities'})]})}),x&&(0,n.jsx)(i,{message:x.message,type:x.type,onClose:()=>g(null)})]}):(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-pink-50 to-white",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-16",children:[(0,n.jsxs)("div",{className:"text-center mb-12",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Discover Your Perfect Grants"}),(0,n.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"We'll search thousands of funding opportunities tailored specifically to your organization's mission and needs"})]}),(0,n.jsx)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-20 h-20 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,n.jsx)("svg",{className:"w-10 h-10 text-pink-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,n.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-3",children:"Ready to Find Funding?"}),(0,n.jsx)("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Click the button below to instantly discover grant opportunities matched to your organization"}),(0,n.jsx)("div",{className:"max-w-md mx-auto mb-6",children:(0,n.jsx)("input",{type:"text",placeholder:"Search for specific grants (optional)",value:d,onChange:e=>m(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500"})}),(0,n.jsx)("button",{onClick:j,className:"px-8 py-4 bg-pink-500 text-white text-lg font-semibold rounded-lg hover:bg-pink-600 transition-all transform hover:scale-105 shadow-lg",children:"Discover Grants Now"})]})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-pink-500 text-3xl mb-2",children:"\ud83c\udfaf"}),(0,n.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Smart Matching"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"AI-powered matching based on your organization profile"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-pink-500 text-3xl mb-2",children:"\ud83d\udd04"}),(0,n.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Real-Time Updates"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Fresh opportunities from multiple trusted sources"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-pink-500 text-3xl mb-2",children:"\ud83d\udcca"}),(0,n.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Track & Manage"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Save favorites and track application progress"})]})]})]})})}}}]);
//# sourceMappingURL=320.73075274.chunk.js.map